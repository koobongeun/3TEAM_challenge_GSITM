<!doctype html>
<html lang="en">
<head>
    <meta charset="utp-8">
    <meta name="viewport"  content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Document</title>
                                           
</head>
<script src="https://code.jquery.com/jquery-2.2.1.js"></script>
<script type="text/javascript" src="script/list.js"></script>

<body>
<header class = "header">
 <div class="header__logo">
  <a href="home.html">
      <h1>맛집 게시판</h1>
  </a>
<div class = "header__gnb">
    <ul>
        <li><a href="추천.html">추천게시판</a></li>
        <li><a href="홍보.html">홍보게시판</a></li>
        <li><a href="list.html">맛집게시판</a></li>
    </ul>
</div>
    </div>
</header>
 <h1 align="center">맛집 게시판 </h1>
<h3 align="center"> 상세 게시글 </h3>
<table style="margin: 0 auto;">
    <th>작성자</th>
    <td><p id="writer"></p></td>
  <tr>
    <th>제목</th>
    <td><p id="title"></p></td>
  </tr>
  <tr>
  <tr>
    <th>내용</th>
    <td>
      <pre id="review"></pre>
    </td>
    </tr>
  <tr>
    <th>작성일</th>
    <td><p id="write_date"></p></td>
  </tr>
</table>
<div style="width:100%; text-align: right;">
  <button onclick="window.history.back()">목록</button>
  <button onclick="modify()">수정</button>
  <button onclick="removeContent()">삭제</button>
</div>
</body>
<script>
  var contents = JSON.parse(localStorage.getItem("contents"));
  getContents();
  function getContents() {

    if (!contents) {
      contents = [];
    }
    
    var content = contents[getParameterByName('no')-1];
    document.getElementById('writer').innerText = content.writer;
    document.getElementById('title').innerText = content.title;
    document.getElementById('review').innerText = content.review;
    document.getElementById('write_date').innerText = content.write_date;
  }

  function removeContent() {
    if (confirm('삭제하시겠습니까?')){
        location.href = 'list.html';
      } else {
        return;
      }
    console.log(contents);
    contents.splice(getParameterByName('no')-1, getParameterByName('no'));
    localStorage.setItem("contents", JSON.stringify(contents));
  }
    function modify() {
      if (confirm('수정하시겠습니까?')){
        location.href = 'modify.html?no='+getParameterByName('no');
        
      } else {
        return;
      }
    }
  //   var contents;
  //     try {
  //       contents = JSON.parse(localStorage.getItem("review"));
  //     } catch (e) {
  //       contents = null;
  //     }

  //   if (!contents) {
  //     contents = [];
  //   }

  //   var writer = document.getElementById('writer').value;
  //   var title = document.getElementById('title').value;
  //   var review = document.getElementById('review').value;
  //   contents.push({no:contents.length+1
  //     , writer:writer
  //     , title:title
  //     , review:review
  //     , write_date:new Date()});
  //   localStorage.setItem("contents", JSON.stringify(contents));

  //   alert('저장되었습니다.');
  //   location.href = 'list.html';
  // }
  function getParameterByName(name) { 
  name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]"); 
  var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"), results = regex.exec(location.search); 
  return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
  }
</script>
</html>