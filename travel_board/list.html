<!DOCTYPE html>
<html>
<title>여행게시판</title>
<link rel="stylesheet", href="list.css">
<style>
  td, th {border:solid 1px}
  table {border-collapse: collapse;}
</style>
<body>

<h1 style="text-align: center;">여행게시판</h1>
<table style="width:100%">
  <tr>
    <th style="width: 5%;">번호</th>
    <th style="width: 10%;">카테고리</th>
    <th style="width: 50%;">제목</th>
    <th>작성자</th>
    <th>작성일</th>
  </tr>
  <tbody id="rows">
      <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
  </tbody>
</table>
<div style="width:100%; text-align: right;">
  <button onclick="moveForm()">글작성</button>
</div>

</body>
<script>
  
  var contentList = JSON.parse(localStorage.getItem("contents"));
  drawRows();
  function moveForm() {
    location.href = 'form.html'
  }

  function drawRows() {
    var templates = '';
    var body = document.getElementById('rows');

    for (var i=contentList.length-1; 0<=i; i--) {
      var content  = contentList[i];
      console.log(content);
      templates += '<tr onclick="moveView('+i+')">';
      templates += '<td style="text-align:center">'+content.no+'</td>';
      templates += '<td style="text-align:center">'+content.category+'</td>';
      templates += '<td>'+content.title+'</td>';
      templates += '<td style="text-align:center">'+content.writer+'</td>';
      templates += '<td style="text-align:center">'+toStringByFormatting(new Date(content.write_date))+'</td>';
      templates += '</tr>';
    }

    body.innerHTML = templates;
  }

  function moveView(contentNo) {
    location.href = 'view.html?no='+(contentNo+1);
  }

  function leftPad(value) {
     if (value >= 10) { return value; } return `0${value}`; 
     } 
     function toStringByFormatting(source, delimiter = '-') { 
       const year = source.getFullYear();
       const month = leftPad(source.getMonth() + 1); 
       const day = leftPad(source.getDate()); 
       return [year, month, day].join(delimiter);
      }
      </script>
</html>