<!DOCTYPE html>
<html>
<title>여행게시판 글작성</title>
<body>

<h1>게시글내용</h1>
<table>
  <tr>
    <th>제목</th>
    <td><p id="title"></p></td>
  </tr>
  <tr>
    <th>작성자</th>
    <td><p id="writer"></p></td>
  </tr>
  <tr>
    <th>카테고리</th>
    <td><p id="category"></p></td>
  </tr>
  <tr>
    <th>작성일</th>
    <td><p id="write_date"></p></td>
  </tr>
  <tr>
    <th>내용</th>
    <td>
      <pre id=contents></pre>
    </td>
  </tr>
</table>
<div style="width:100%; text-align: right;">
  <button onclick="window.history.back()">목록</button>
  <button onclick="modify()">수정</button>
  <button onclick="removeContent()" >삭제</button>
</div>
</body>
<script>
  var contents = JSON.parse(localStorage.getItem("contents"));
  getContents();
  function getContents() {

    if (!contents) {
      contents = [];
    }
    
    var content = contents[getParameterByName('no')-1];
    document.getElementById('title').innerText = content.title;
    document.getElementById('writer').innerText = content.writer;
    document.getElementById('category').innerText = content.category;
    document.getElementById('contents').innerText = content.contents;
    document.getElementById('write_date').innerText = content.write_date;
  }

  function removeContent() {
    console.log(contents);
    contents.splice(getParameterByName('no')-1, getParameterByName('no'));
    localStorage.setItem("contents", JSON.stringify(contents));
    if (!confirm('삭제하시겠습니까?')) {
      return;
    }
    location.href='list.html';
  }


  function modify() {
      if (confirm('수정하시겠습니까?')){
        location.href = 'form2.html?no='+getParameterByName('no');
        
      } else {
        return;
      }
    }


  function getParameterByName(name) {
     name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
     var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"), results = regex.exec(location.search);
     return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
     }




</script>
</html>