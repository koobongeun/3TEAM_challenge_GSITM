<!DOCTYPE html>
<html>
<title>여행게시판 글작성</title>
<body>

<h1>게시글작성</h1>
<form>
<table>
  <tr>
    <th>제목</th>
    <td><input type="text" id="title" name="title"/></td>
  </tr>
  <tr>
    <th>작성자</th>
    <td><input type="text" id="writer" name="writer"/></td>
  </tr>
  <tr>
    <th>카테고리</th>
    <td><input type="text" id="category" name="category" list="list1"/>
    <datalist id="list1">
      <option value="질문"></option>
      <option value="추천"></option>
      <option value="팁"></option>
      <option value="기타"></option>
    </datalist>
    
    </td>
  </tr>
  <tr>
    <th>내용</th>
    <td>
      <textarea type="text" id="contents" name="contents"></textarea>
    </td>
  </tr>
</table>
</form>
<div style="width:100%; text-align: right;">
  <button onclick="window.history.back()">취소</button>
  <button onclick="save()">저장</button>
</div>

</body>

<script>

function valid(){
  var titleEl=document.getElementById('title');
  var writerEl=document.getElementById('writer');
  var categoryEl=document.getElementById('category');
  var contentsEl=document.getElementById('contents');
  if(!titleEl.value){
      alert("제목을 입력하세요.")
    return false;
   }
   else if(!writerEl.value){
      alert("작성자를 입력하세요.")
    return false;
   }
   else if(!categoryEl.value){
      alert("카테고리를 입력하세요.")
    return false;
   }
   else if(!contentsEl.value){
      alert("내용을 입력하세요.")
    return false;
   }
  return true;
}


  function save() {
    if (!confirm('저장하시겠습니까?')) {
      return;
    }
    if(!valid()){
      return;

    }
    var contents;
      try {
        contents = JSON.parse(localStorage.getItem("contents"));
      } catch (e) {
        contents = null;
      }

    if (!contents) {
      contents = [];
    }

    var title = document.getElementById('title').value;
    var writer = document.getElementById('writer').value;
    var category = document.getElementById('category').value;
    var content = document.getElementById('contents').value;
    contents.push({no:contents.length+1
      , title:title
      , writer:writer
      , category:category
      , contents:content
      , write_date:new Date()});
    localStorage.setItem("contents", JSON.stringify(contents));

    alert('저장되었습니다.');
    location.href = 'list.html';
  }
</script>
</html>